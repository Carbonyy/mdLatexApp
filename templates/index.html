{% extends "base.html" %}

{% block content %}
<div class="app-header">
    <h1>üìù Markdown & LaTeX Editor</h1>
    <div class="header-controls">
        <button id="aiHelpBtn" class="btn btn-ai">ü§ñ AI –ü–æ–º–æ—â–Ω–∏–∫</button>
    </div>
</div>

<div class="editor-container">
    <!-- –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ -->
    <div class="toolbar">
        <div class="toolbar-group">
            <select id="modeSelector" class="mode-selector">
                <option value="markdown">Markdown</option>
                <option value="latex">LaTeX</option>
            </select>
        </div>
        
        <div class="toolbar-group" id="markdownTools">
            <button class="tool-btn" data-insert="# your text here" title="–ó–∞–≥–æ–ª–æ–≤–æ–∫ 1">H1</button>
            <button class="tool-btn" data-insert="## your text here" title="–ó–∞–≥–æ–ª–æ–≤–æ–∫ 2">H2</button>
            <button class="tool-btn" data-insert="**your text here**" title="–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç">B</button>
            <button class="tool-btn" data-insert="*your text here*" title="–ö—É—Ä—Å–∏–≤">I</button>
            <button class="tool-btn" data-insert="- " title="–°–ø–∏—Å–æ–∫">List</button>
            <button class="tool-btn" data-insert="[Label](Link here)" title="–°—Å—ã–ª–∫–∞">Link</button>
            <button class="tool-btn" data-insert="```Write your code here```" title="–ö–æ–¥">Code</button>
        </div>
        
        <div class="toolbar-group" id="latexTools" style="display: none;">
            <button class="tool-btn" data-insert="\section{ your text here }" title="–†–∞–∑–¥–µ–ª">Section</button>
            <button class="tool-btn" data-insert="\subsection{ your text here }" title="–ü–æ–¥—Ä–∞–∑–¥–µ–ª">Subsection</button>
            <button class="tool-btn" data-insert="\textbf{ your text here }" title="–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç">B</button>
            <button class="tool-btn" data-insert="\textit{ your text here }" title="–ö—É—Ä—Å–∏–≤">I</button>
            <button class="tool-btn" data-insert="$ your formula here $ " title="–§–æ—Ä–º—É–ª–∞">Formula</button>
            <button class="tool-btn" data-insert="\begin{itemize}\n\item example \n\end{itemize}" title="–°–ø–∏—Å–æ–∫">List</button>
        </div>
        
        <div class="toolbar-group">
            <select id="viewMode" class="view-selector">
                <option value="split">Split View</option>
                <option value="editor">Editor Only</option>
                <option value="preview">Preview Only</option>
            </select>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ -->
    <div class="main-editor">
        <div class="editor-panel" id="editorPanel">
            <div class="editor-header">
              <h3>–†–µ–¥–∞–∫—Ç–æ—Ä</h3>
              <button id="fullscreenBtn" class="btn btn-small">üì∫ –ü–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω</button>
            </div>
            <textarea id="editor" placeholder="–ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å –≤–∞—à –¥–æ–∫—É–º–µ–Ω—Ç..."></textarea>
        </div>

        <div class="preview-panel" id="previewPanel">
            <div class="preview-header">
                <h3>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</h3>
                <div class="preview-controls">
                    <button id="exportPdf" class="btn btn-export">üìÑ PDF</button>
                    <button id="exportHtml" class="btn btn-export">üåê HTML</button>
                </div>
            </div>
            <div id="preview" class="preview-content"></div>
        </div>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ AI –ø–æ–º–æ—â–Ω–∏–∫–∞ -->
<div id="aiModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h3>ü§ñ AI –ü–æ–º–æ—â–Ω–∏–∫</h3>
        <div class="ai-chat">
            <div id="aiMessages" class="ai-messages"></div>
            <div class="ai-input">
                <input type="text" id="aiQuestion" placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –æ Markdown –∏–ª–∏ LaTeX...">
                <button id="sendQuestion" class="btn btn-primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
</div>

<!-- –°—Ç–∞—Ç—É—Å –±–∞—Ä -->
<div class="status-bar">
    <div class="status-item">
        <span id="currentMode">Markdown</span> —Ä–µ–∂–∏–º
    </div>
    <div class="status-item">
        <span id="charCount">0</span> —Å–∏–º–≤–æ–ª–æ–≤
    </div>
    <div class="status-item">
        <span id="lineCount">1</span> —Å—Ç—Ä–æ–∫
    </div>
    <div class="status-item" id="saveStatus">
        –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ
    </div>
</div>
{% endblock %}